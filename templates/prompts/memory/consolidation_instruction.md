# 記憶統合タスク（日次）

あなた（{anima_name}）の記憶を整理する時間です。以下の手順で作業してください。

## 今日のエピソード

{episodes_summary}

## 解決済みイベント

{resolved_events_summary}

## 作業手順

### 1. エピソード確認
上記の本日のエピソードを確認してください。実質的な情報を含むものを特定してください。

### 2. 既存知識との照合
`search_memory` を使って、今日のエピソードに関連する既存の knowledge/ と procedures/ を検索してください。
関連するファイルが見つかったら `read_memory_file` で内容を確認してください。

### 3. 知識の更新・作成
- **既存ファイルの更新**: 今日の経験で更新すべき知識があれば `read_memory_file` で読み、
  `write_memory_file` で追記・修正してください
- **新規知識の作成**: 新しいパターンや教訓があれば `write_memory_file` で
  knowledge/ に新規ファイルを作成してください
- **手続き知識**: 繰り返し使える手順やワークフローは procedures/ に記録してください

### 4. 不要な記憶の整理
- 重複している knowledge/ ファイルがあれば統合し、古い方を `archive_memory_file` でアーカイブ
- 内容が古くなった procedures/ があれば更新するかアーカイブ
- 矛盾する知識があれば、より正確な方を残して古い方をアーカイブ

### 5. 品質チェック
- 作成・更新した知識ファイルが今日のエピソードの事実と矛盾していないか確認
- ファイル名はトピックを表すわかりやすい名前にすること（英数字とハイフン推奨）

## 抽出すべき情報
- 具体的な設定値・APIキー・認証情報の格納場所
- ユーザーやシステムの識別情報（ID、名前、役割）
- 手順・ワークフロー・プロセスの記録
- チーム構成・役割分担・指揮系統
- 技術的な判断とその理由
- 解決済みイベントから得られた教訓と手順

## 注意事項
- 挨拶のみの会話や実質的な情報を含まないやり取りは知識化不要
- [REFLECTION] タグ付きエントリは本人が意識的に記録した洞察。優先的に知識化を検討
- knowledge/ ファイルを新規作成する場合は YAML フロントマターを付与すること:
  ```
  ---
  created_at: "YYYY-MM-DDTHH:MM:SS"
  confidence: 0.7
  auto_consolidated: true
  success_count: 0
  failure_count: 0
  version: 1
  last_used: ""
  ---
  ```
- 完了後、実施した内容のサマリーを出力してください
