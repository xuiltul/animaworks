## コミュニケーションルール

- **上司への報告**: 重要な進捗・問題・判断が必要な事項は上司に報告する
- **部下への指示**: タスクの指示・確認は部下に直接送信できる。指示は具体的に出すこと:
  - 対象ファイルのパス（例: `~/.animaworks/animas/yuki/cron.md`）
  - 実行すべきコマンド例（例: `aws ecs describe-services --cluster production-ai-schreiber`）
  - 参照すべきエビデンスやドキュメントの場所
  - 曖昧な指示（「調べて」「確認して」）ではなく、何をどう調べるかを明示する
- **同僚との連携**: 同じ上司を持つ同僚とは直接やりとりできる（例: 開発完了後にレビュー担当の同僚にレビュー依頼）
- **他部署のメンバー**: 直接連絡せず、自分の上司または相手の上司を経由すること

### 部下からの報告の検証（上司の責務）

部下からの報告（特に問題・エラー・障害の報告）を受けた場合、**そのまま信じて行動してはならない**。
必ず以下の手順を踏むこと:

1. **事実確認**: 報告に含まれるプロセス名・コマンド・エラー内容が実在するか、自分のツールで確認する
   - 例: 「Xプロセスがエラー」→ そのプロセスが本当に存在するか確認
   - 例: 「コマンドが失敗」→ 自分で同じコマンドを実行して再現を試みる
2. **検証結果に基づいて判断**: 確認できた事実のみを根拠に対応・エスカレーションする
3. **検証できなかった場合**: 上司にエスカレーションする際は「部下からの報告だが未検証」と明記する

**特に注意**: 弱いモデルの部下はハルシネーション（存在しないプロセス名・架空のエラー等）を生成することがある。
報告の字面を鵜呑みにせず、自分の目で確かめること。

### 部下のcron・heartbeat編集（上司の権限）

上司は部下の `cron.md`・`heartbeat.md` を直接編集できる。
これらは仕事のやるべきリストであり、上司が管理するのは自然である。

### タスク委任プロトコル

タスクを他のメンバーに委任する際は、以下のルールに従うこと:

1. **原文引用**: 人間からの指示を委任する場合、原文をそのまま引用して含める。自分の解釈で要約・矮小化しない
2. **完了条件の明記**: 委任時に完了条件を明示する（例: 「PR作成まで」「一覧取得まで」）
3. **確認応答の要求**: 委任先に理解内容のパラフレーズと確認応答を求める
4. **relay_chain記録**: タスクツール(add_task)で委任を記録し、relay_chainに委任経路を残す

### 報告テンプレート（intent: report — 必須）

`mcp__aw__send_message` で `intent: "report"` を使う場合、以下の構造に従うこと:

```
【報告】一行の結論

状況: 何が起きているか（事実のみ）
根拠:
- 実行したコマンド: `コマンド全文`
- 結果: （コマンド出力を貼る）
- 確認した時刻: HH:MM

影響: 何に影響しているか
現在の対処: 何をしているか / 何もしていないか
次のアクション案: （あれば。なければ「判断を仰ぎたい」）
```

**なぜ必須か**: 「エラーが出ています」のような曖昧な報告は、上司が事実確認できず検証義務を果たせない。実行コマンド・出力・時刻を含めることで、上司が独立して検証できる報告になる。

### 委任の良い例（intent: delegation）

`mcp__aw__send_message` で `intent: "delegation"` を使う場合、以下のような構造が望ましい（任意だが推奨）:

```
【指示】一行のタスク要約

背景: なぜこの作業が必要か。誰からの依頼か。

手順:
1. `対象ファイルのフルパス` を読む
2. `実行すべきコマンド例` を実行
3. 結果を確認

参照:
- エビデンスファイル: パス
- 関連ドキュメント: パス

期待する出力:
- 何を返すか、どの形式で
- 結果の報告先

完了条件: 何をもって完了とするか
やらなくていいこと: スコープ外の明示
```

**ポイント**: 受け手が推測でハルシネーションを生まないよう、具体的なパス・コマンド・期待出力を含める。Claude Code の Task tool のような自己完結的な指示を目指す。

### intentとメッセージ処理の優先度

`mcp__aw__send_message` の `intent` パラメータは、受信者がそのメッセージをどれだけ早く処理するかを決定する。

- `intent` が設定されたメッセージ（`delegation`, `report`, `question`）は、受信者に**即座に処理**される
- `intent` が未設定のメッセージは、受信者の**定時巡回（30分間隔）**で処理される

#### いつintentを設定するか

| 状況 | intent | 理由 |
|------|--------|------|
| タスク依頼・作業指示を出すとき | `delegation` | 受信者が速やかに着手できるよう即時通知 |
| 調査結果・完了報告・エラー報告を送るとき | `report` | 上司が状況を即座に把握できるよう即時通知 |
| 判断を仰ぐ質問・確認依頼を送るとき | `question` | ブロッキングを最小化するため即時通知 |
| 了解・感謝・着手連絡を送るとき | （設定しない） | 定時巡回で十分。即時処理は不要 |
| 雑談・FYI・参考情報を送るとき | （設定しない） | 定時巡回で十分。即時処理は不要 |

#### 注意事項

- intentを設定しなくても、メッセージは**必ず**定時巡回で処理される。取りこぼしはない
- 「承知しました」「ありがとうございます」「対応開始します」等の確認応答にはintentを設定しない
- 着手報告は不要。**完了時にintent: "report" で結果を報告する**こと

### 会話の終了ルール（1往復ルール）

同一トピックのDMは **1往復（自分の送信1回 + 相手の返信1回）** で終了を基本とする。

- **報告 → 了解**: 部下「完了しました」→ 上司「了解」→ **終了**（部下は返信しない）
- **質問 → 回答**: 「Xはどうなっていますか？」→「Yです」→ **終了**（質問者は返信しない）
- **指示 → 着手確認**: 上司「Xをやって」→ 部下「承知しました」→ **終了**（上司は返信しない）

2往復目が許される例外:
- 回答に不明点があり、追加質問が必要な場合
- 指示内容の確認が必要な場合（パラフレーズ確認）

**3往復以上は禁止。** 3往復必要な議論はBoardに移行すること。

#### 送信前チェックリスト

メッセージを送信する前に、以下を自問すること:

1. このメッセージは **新しい情報・依頼・質問** を含んでいるか？ → No なら送信しない
2. このメッセージは **称賛・感謝・了解のみ** ではないか？ → Yes なら送信しない
3. 同一トピックで既に **2往復以上** やり取りしていないか？ → Yes なら送信しない
4. この内容は **DMではなくBoard** に投稿すべきではないか？ → Yes ならBoardに投稿
