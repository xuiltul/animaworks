# 報告・エスカレーションの方法

上司への報告は組織運営の生命線である。
適切なタイミング・形式で報告することで、問題の早期発見と迅速な意思決定を支える。

## 報告のタイミング

### 即時報告が必要な場面（MUST）

以下の場面では、発生を認識した時点で即座に上司に報告すること:

| 場面 | 理由 | 例 |
|------|------|-----|
| タスク完了 | 上司が次のアクションを判断するため | デプロイ完了、レポート作成完了 |
| エラー・障害発生 | 早期対応のため | API停止、データ不整合の検出 |
| 判断が必要な場面 | 自分の権限外の決定を仰ぐため | 方針変更の提案、リソース追加の要請 |
| 期限遅延が確実 | 上司がスケジュールを調整するため | ブロッカー発生で作業停止 |
| セキュリティ上の懸念 | 即座に対処が必要なため | 不正アクセスの兆候、認証情報の漏洩疑い |

### 定期報告の場面（SHOULD）

| 場面 | 頻度 | 内容 |
|------|------|------|
| 日次サマリー | 毎日（業務終了時） | 当日の成果・翌日の予定 |
| 週次振り返り | 毎週（金曜） | 1週間の成果・課題・来週の計画 |
| 長期タスクの途中経過 | 適宜（目安: 2-3日ごと） | 進捗率・残作業・ブロッカーの有無 |

### 報告不要な場面

- 記憶の書き込み・整理（内部的な作業）
- ルーチンワークで異常がない場合（ハートビートで `HEARTBEAT_OK` 相当）
- 上司が明示的に「報告不要」と指示した作業

## 報告の基本フォーマット

### SCANA フォーマット

報告は以下の5項目で構成する。全項目を含める必要はなく、状況に応じて取捨選択する。

| 項目 | 英語 | 説明 | MUST/MAY |
|------|------|------|----------|
| 状況 | Situation | 今何が起きているか | MUST |
| 原因 | Cause | なぜそうなったか（判明している場合） | MAY |
| 対処 | Action taken | 自分が取った対応 | SHOULD |
| 次のステップ | Next steps | 今後何をするか / 何を判断してほしいか | MUST |
| 付加情報 | Appendix | 関連ログ・ファイルパス・数値 | MAY |

### フォーマット使用例

```
send_message(
    to="manager",
    content="""【完了報告】売上データ月次集計

状況: 2026年1月の売上データ集計が完了しました。
対処: 部門別・カテゴリ別に集計し、前月比も算出しました。
次のステップ: 特にアクション不要です。レポートをご確認ください。
付加情報: /shared/reports/sales_summary_202601.md"""
)
```

## 報告の種類別テンプレート

### 完了報告

タスクが正常に完了した場合の報告。

```
send_message(
    to="manager",
    content="""【完了報告】{タスク名}

状況: {タスク名}が完了しました。
成果物: {ファイルパスまたは結果の要約}
所要時間: {かかった時間}
備考: {特記事項があれば}"""
)
```

**具体例:**

```
send_message(
    to="manager",
    content="""【完了報告】API仕様書のv2.1更新

状況: API仕様書にv2.1の変更点を反映しました。
成果物: /shared/docs/api-spec.md（差分: セクション3.2, 4.1を更新）
所要時間: 約45分
備考: ページネーションの例を3パターン追加しました。"""
)
```

### エラー報告

障害やエラーが発生した場合の報告。

```
send_message(
    to="manager",
    content="""【エラー報告】{何が起きたか}

状況: {現在の状態の説明}
原因: {判明している範囲での原因}
影響範囲: {何が止まっているか、誰に影響しているか}
対処: {自分が試した対策とその結果}
次のステップ: {今後の対応案 / 判断が必要なこと}"""
)
```

**具体例:**

```
send_message(
    to="manager",
    content="""【エラー報告】定期バッチ処理の失敗

状況: 毎朝9:00のデータ同期バッチが3回連続で失敗しています。
原因: 外部APIのレスポンスタイムアウト（30秒超過）。API側の障害の可能性が高い。
影響範囲: 今朝以降のデータが未同期。ダッシュボードの数値が昨日時点で止まっている。
対処: タイムアウトを60秒に延長して再実行 → 同様に失敗。API提供元のステータスページを確認 → メンテナンス情報なし。
次のステップ: API提供元への問い合わせが必要です。ご判断をお願いします。"""
)
```

### 判断依頼（意思決定のエスカレーション）

自分の権限では判断できない場合の報告。

```
send_message(
    to="manager",
    content="""【判断依頼】{何について判断が必要か}

状況: {現在の状況}
選択肢:
A. {選択肢Aの内容} — メリット: {利点} / デメリット: {欠点}
B. {選択肢Bの内容} — メリット: {利点} / デメリット: {欠点}
私の推奨: {A or B}（理由: {なぜ}）

ご判断をお願いします。"""
)
```

**具体例:**

```
send_message(
    to="manager",
    content="""【判断依頼】ログ保存期間の変更

状況: ディスク使用量が85%に達しており、1週間以内に90%を超える見込みです。
選択肢:
A. ログ保存期間を90日→30日に短縮 — メリット: 即座に50GB削減 / デメリット: 古いログでの調査が不可能に
B. ストレージを追加（500GB） — メリット: ログを維持できる / デメリット: 月額コスト増（約$50/月）
C. 古いログをアーカイブストレージに移動 — メリット: ログ維持+コスト抑制 / デメリット: 実装に2日必要
私の推奨: C（コストとデータ保全のバランスが良い）

ご判断をお願いします。"""
)
```

### 途中経過報告

長期タスクの中間報告。

```
send_message(
    to="manager",
    content="""【途中経過】{タスク名}

進捗: {完了した作業 / 全体に対する進捗率}
残作業: {まだ終わっていないこと}
ブロッカー: {あれば記載。なければ「なし」}
見込み: {期限に間に合うか}"""
)
```

**具体例:**

```
send_message(
    to="manager",
    content="""【途中経過】ユーザー通知機能の実装

進捗: Phase 1（設計）完了、Phase 2（実装）の70%が完了
  - メール通知: 完了
  - Slack通知: 完了
  - アプリ内通知: 実装中（残り1日程度）
残作業: アプリ内通知の実装 + テストコード作成
ブロッカー: なし
見込み: 期限（2/20）に間に合います。"""
)
```

## 日次サマリーのフォーマット

日次サマリーは業務終了時に上司に送る1日の振り返り。

### テンプレート

```
send_message(
    to="manager",
    content="""【日次サマリー】2026-02-15

■ 完了したこと
- {完了タスク1}
- {完了タスク2}

■ 進行中
- {進行中タスク1}（進捗: {XX%}、見込み: {期限}）

■ 課題・懸念
- {あれば記載}

■ 明日の予定
- {予定1}
- {予定2}"""
)
```

### 具体例

```
send_message(
    to="manager",
    content="""【日次サマリー】2026-02-15

■ 完了したこと
- API仕様書のv2.1更新（/shared/docs/api-spec.md）
- ログ監視スクリプトのバグ修正（タイムゾーン処理）

■ 進行中
- ユーザー通知機能の実装（進捗: 70%、見込み: 2/20完了予定）

■ 課題・懸念
- 外部APIのレスポンスが遅くなっている兆候あり（現時点では影響なし、引き続き監視）

■ 明日の予定
- アプリ内通知の実装完了
- テストコード作成着手"""
)
```

## 緊急報告 vs 通常報告の判断

### 緊急報告（即時、MUST）

以下に該当する場合は、他の作業を中断してでも即座に報告すること:

- **サービス停止**: ユーザーに影響が出ている障害
- **データ損失・破損**: 復旧不可能な状態になる可能性
- **セキュリティインシデント**: 不正アクセス、情報漏洩の疑い
- **期限遅延が確定**: 既にコミットした期限に間に合わないことが確実

緊急報告のメッセージには MUST: 冒頭に「【緊急】」を付けること:

```
send_message(
    to="manager",
    content="""【緊急】本番データベースの応答遅延

状況: 本番DBの応答時間が通常の10倍（平均300ms→3000ms）に悪化。
影響: Web UIのページ読み込みが10秒以上かかる状態。
対処中: スロークエリの特定を開始。10分以内に続報します。"""
)
```

### 通常報告（次のハートビートまたは日次サマリーで）

以下は緊急性が低いため、まとめて報告してよい:

- 計画通り進んでいるタスクの途中経過
- 軽微な問題で既に自分で解決済みのもの
- 改善提案やアイデア

## エスカレーション判断フローチャート

報告をエスカレーションすべきかの判断手順:

```
1. 自分の権限内で解決可能か？
   → Yes: 自分で対処し、完了後に結果を報告
   → No: ステップ2へ

2. 緊急性はあるか？（サービス影響・データ損失リスク）
   → Yes: 【緊急】として即座にエスカレーション
   → No: ステップ3へ

3. 判断の選択肢を整理できるか？
   → Yes: 選択肢と推奨を添えて【判断依頼】として報告
   → No: 状況をありのまま報告し、上司の指示を仰ぐ
```

## 報告における注意事項

### やるべきこと（MUST/SHOULD）

- MUST: 事実と推測を区別して書くこと。推測には「可能性が高い」「おそらく」等を付ける
- MUST: 影響範囲を明記すること。「何が」「誰に」影響しているか
- SHOULD: 自分が試した対策とその結果を含めること。上司が同じ対策を提案する無駄を避ける
- SHOULD: 次のアクションを自分から提案すること。指示待ちにならない

### 避けるべきこと

- 結論を後回しにして経緯から長々と書くこと（結論を先に書く）
- 「問題が起きました」だけで具体的な情報がない報告
- 複数の異なるトピックを1つのメッセージにまとめること（トピックごとに分ける）
- 問題を隠したり、軽く見せようとすること（正確な状況を伝える）
